<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odyssey Translation Matrix: Greek, Lattimore, Wilson</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400&family=Noto+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            background-color: #f8f9fa;
        }
        .text-content {
            font-family: 'Noto Serif', serif;
            line-height: 1.8;
        }
        /* Custom Highlight Colors for Parts of Speech */
        .pos-noun { color: #1e40af; font-weight: 500; } /* Blue */
        .pos-verb { color: #b91c1c; font-weight: 500; } /* Red */
        .pos-adj { color: #15803d; font-weight: 500; }  /* Green */
        .pos-pron { color: #7e22ce; } /* Purple */
        .pos-name { color: #c2410c; font-weight: bold; } /* Orange - Proper Names */
        
        /* Interaction States */
        .word-span {
            cursor: pointer;
            padding: 0 2px;
            border-radius: 3px;
            transition: all 0.1s ease;
        }

        /* Hover effect when hovering a linked word */
        .active-alignment {
            background-color: #fef08a; /* Yellow-200 */
            box-shadow: 0 0 0 2px #eab308; /* Yellow-500 ring */
            text-decoration: none !important;
        }
        
        /* When POS colors are disabled via toggle */
        .no-colors .pos-noun, 
        .no-colors .pos-verb, 
        .no-colors .pos-adj, 
        .no-colors .pos-pron,
        .no-colors .pos-name {
            color: inherit;
            font-weight: normal;
        }

        /* Greek specific font adjustment */
        .greek-text {
            font-size: 1.1em;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex flex-col overflow-hidden">

    <!-- Header & Controls -->
    <header class="bg-white border-b border-slate-200 shadow-sm z-10 p-4">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-800">Odyssey Book 1: Translation Matrix</h1>
                <p class="text-sm text-slate-500">Comparative alignment of Original Greek, Lattimore, and Wilson</p>
            </div>
            
            <div class="flex flex-wrap gap-4 items-center">
                <!-- Legend -->
                <div class="flex gap-3 text-xs font-semibold bg-slate-100 p-2 rounded-lg">
                    <span class="text-blue-800">Noun</span>
                    <span class="text-red-700">Verb</span>
                    <span class="text-green-700">Adj</span>
                    <span class="text-purple-700">Pronoun</span>
                    <span class="text-orange-700">Name</span>
                </div>

                <!-- Toggles -->
                <div class="flex gap-2">
                    <button id="toggleColors" class="px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded text-sm font-medium transition" onclick="toggleColors()">
                        Toggle Colors
                    </button>
                    <button class="px-3 py-1 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded text-sm font-medium transition" onclick="resetView()">
                        Reset View
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-auto p-4 md:p-8">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
            
            <!-- Greek Column -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 p-3 border-b border-slate-200 font-bold text-slate-700 text-center">
                    Greek (Original)
                </div>
                <div id="greek-container" class="p-6 text-content greek-text">
                    <!-- Content injected via JS -->
                </div>
            </div>

            <!-- Lattimore Column -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 p-3 border-b border-slate-200 font-bold text-slate-700 text-center">
                    Richmond Lattimore (1965)
                </div>
                <div id="lattimore-container" class="p-6 text-content">
                    <!-- Content injected via JS -->
                </div>
            </div>

            <!-- Wilson Column -->
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 p-3 border-b border-slate-200 font-bold text-slate-700 text-center">
                    Emily Wilson (2017)
                </div>
                <div id="wilson-container" class="p-6 text-content">
                    <!-- Content injected via JS -->
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 p-2 text-center text-xs text-slate-400">
        Hover over words to see alignments. Colors indicate grammatical function.
    </footer>

    <script>
        // Data Structure for the Text
        // alignId: unique key to link words across columns
        // pos: noun, verb, adj, pron, name, other
        
        const greekData = [
            { line: 1, words: [
                {t: "ἄνδρα", p: "noun", a: "man"}, {t: "μοι", p: "pron", a: "me"}, {t: "ἔννεπε,", p: "verb", a: "tell"}, {t: "μοῦσα,", p: "name", a: "muse"}, {t: "πολύτροπον,", p: "adj", a: "polytropon"}, {t: "ὃς", p: "pron", a: "who"}, {t: "μάλα", p: "adv", a: null}, {t: "πολλὰ", p: "adj", a: "many"}
            ]},
            { line: 2, words: [
                {t: "πλάγχθη,", p: "verb", a: "driven"}, {t: "ἐπεὶ", p: "conj", a: "after"}, {t: "Τροίης", p: "name", a: "troy"}, {t: "ἱερὸν", p: "adj", a: "holy"}, {t: "πτολίεθρον", p: "noun", a: "citadel"}, {t: "ἔπερσεν:", p: "verb", a: "sacked"}
            ]},
            { line: 3, words: [
                {t: "πολλῶν", p: "adj", a: "many"}, {t: "δ᾽", p: "part", a: null}, {t: "ἀνθρώπων", p: "noun", a: "men"}, {t: "ἴδεν", p: "verb", a: "saw"}, {t: "ἄστεα", p: "noun", a: "cities"}, {t: "καὶ", p: "conj", a: "and"}, {t: "νόον", p: "noun", a: "mind"}, {t: "ἔγνω,", p: "verb", a: "learned"}
            ]},
            { line: 4, words: [
                {t: "πολλὰ", p: "adj", a: "many"}, {t: "δ᾽", p: "part", a: null}, {t: "ὅ", p: "pron", a: "he"}, {t: "γ᾽", p: "part", a: null}, {t: "ἐν", p: "prep", a: "on"}, {t: "πόντῳ", p: "noun", a: "sea"}, {t: "πάθεν", p: "verb", a: "suffered"}, {t: "ἄλγεα", p: "noun", a: "pains"}, {t: "ὃν", p: "pron", a: "his"}, {t: "κατὰ", p: "prep", a: "in"}, {t: "θυμόν,", p: "noun", a: "spirit"}
            ]},
            { line: 5, words: [
                {t: "ἀρνύμενος", p: "verb", a: "struggling"}, {t: "ἥν", p: "pron", a: "his"}, {t: "τε", p: "part", a: null}, {t: "ψυχὴν", p: "noun", a: "soul"}, {t: "καὶ", p: "conj", a: "and"}, {t: "νόστον", p: "noun", a: "homecoming"}, {t: "ἑταίρων.", p: "noun", a: "companions"}
            ]},
            { line: 6, words: [
                {t: "ἀλλ᾽", p: "conj", a: "but"}, {t: "οὐδ᾽", p: "adv", a: "not"}, {t: "ὣς", p: "adv", a: "so"}, {t: "ἑτάρους", p: "noun", a: "companions"}, {t: "ἐρρύσατο,", p: "verb", a: "save"}, {t: "ἱέμενός", p: "verb", a: "strove"}, {t: "περ:", p: "part", a: null}
            ]},
            { line: 7, words: [
                {t: "αὐτῶν", p: "pron", a: "own"}, {t: "γὰρ", p: "conj", a: "for"}, {t: "σφετέρῃσιν", p: "pron", a: "their"}, {t: "ἀτασθαλίῃσιν", p: "noun", a: "recklessness"}, {t: "ὄλοντο,", p: "verb", a: "destroyed"}
            ]},
            { line: 8, words: [
                {t: "νήπιοι,", p: "noun", a: "fools"}, {t: "οἳ", p: "pron", a: "who"}, {t: "κατὰ", p: "prep", a: null}, {t: "βοῦς", p: "noun", a: "oxen"}, {t: "Ὑπερίονος", p: "name", a: "hyperion"}, {t: "Ἠελίοιο", p: "name", a: "helios"}
            ]},
            { line: 9, words: [
                {t: "ἤσθιον:", p: "verb", a: "devoured"}, {t: "αὐτὰρ", p: "conj", a: null}, {t: "ὁ", p: "pron", a: "he"}, {t: "τοῖσιν", p: "pron", a: "them"}, {t: "ἀφείλετο", p: "verb", a: "took"}, {t: "νόστιμον", p: "adj", a: "homecoming"}, {t: "ἦμαρ.", p: "noun", a: "day"}
            ]}
        ];

        const lattimoreData = [
            { line: 1, words: [
                {t: "Tell", p: "verb", a: "tell"}, {t: "me,", p: "pron", a: "me"}, {t: "Muse,", p: "name", a: "muse"}, {t: "of the", p: "other", a: null}, {t: "man", p: "noun", a: "man"}, {t: "of many ways,", p: "adj", a: "polytropon"}, {t: "who", p: "pron", a: "who"}, {t: "was driven", p: "verb", a: "driven"}
            ]},
            { line: 2, words: [
                {t: "far", p: "adj", a: "many"}, {t: "journeys,", p: "noun", a: null}, {t: "after", p: "conj", a: "after"}, {t: "he had sacked", p: "verb", a: "sacked"}, {t: "Troy’s", p: "name", a: "troy"}, {t: "sacred", p: "adj", a: "holy"}, {t: "citadel.", p: "noun", a: "citadel"}
            ]},
            { line: 3, words: [
                {t: "Many", p: "adj", a: "many"}, {t: "were they whose", p: "other", a: null}, {t: "cities", p: "noun", a: "cities"}, {t: "he saw,", p: "verb", a: "saw"}, {t: "whose", p: "pron", a: null}, {t: "minds", p: "noun", a: "mind"}, {t: "he learned of,", p: "verb", a: "learned"}
            ]},
            { line: 4, words: [
                {t: "many", p: "adj", a: "many"}, {t: "the pains", p: "noun", a: "pains"}, {t: "he suffered", p: "verb", a: "suffered"}, {t: "in his", p: "other", a: null}, {t: "spirit", p: "noun", a: "spirit"}, {t: "on the wide", p: "other", a: null}, {t: "sea,", p: "noun", a: "sea"}
            ]},
            { line: 5, words: [
                {t: "struggling", p: "verb", a: "struggling"}, {t: "for his own", p: "other", a: null}, {t: "life", p: "noun", a: "soul"}, {t: "and the", p: "other", a: "and"}, {t: "homecoming", p: "noun", a: "homecoming"}, {t: "of his", p: "other", a: null}, {t: "companions.", p: "noun", a: "companions"}
            ]},
            { line: 6, words: [
                {t: "Even so", p: "adv", a: "so"}, {t: "he could", p: "other", a: null}, {t: "not", p: "adv", a: "not"}, {t: "save", p: "verb", a: "save"}, {t: "his", p: "pron", a: null}, {t: "companions,", p: "noun", a: "companions"}, {t: "hard though", p: "adv", a: null}
            ]},
            { line: 7, words: [
                {t: "he strove to;", p: "verb", a: "strove"}, {t: "they were destroyed", p: "verb", a: "destroyed"}, {t: "by their own", p: "pron", a: "own"}, {t: "wild recklessness,", p: "noun", a: "recklessness"}
            ]},
            { line: 8, words: [
                {t: "fools,", p: "noun", a: "fools"}, {t: "who", p: "pron", a: "who"}, {t: "devoured", p: "verb", a: "devoured"}, {t: "the oxen", p: "noun", a: "oxen"}, {t: "of Helios,", p: "name", a: "helios"}, {t: "the Sun God,", p: "name", a: "hyperion"}
            ]},
            { line: 9, words: [
                {t: "and he", p: "pron", a: "he"}, {t: "took away", p: "verb", a: "took"}, {t: "the day", p: "noun", a: "day"}, {t: "of their", p: "pron", a: "them"}, {t: "homecoming.", p: "noun", a: "homecoming"}, {t: "From some point", p: "other", a: null}
            ]},
            { line: 10, words: [
                {t: "here, goddess, daughter of Zeus, speak, and begin our story.", p: "other", a: null}
            ]}
        ];

        const wilsonData = [
            { line: 1, words: [
                {t: "Tell", p: "verb", a: "tell"}, {t: "me", p: "pron", a: "me"}, {t: "about a", p: "other", a: null}, {t: "complicated", p: "adj", a: "polytropon"}, {t: "man.", p: "noun", a: "man"}
            ]},
            { line: 2, words: [
                {t: "Muse,", p: "name", a: "muse"}, {t: "tell", p: "verb", a: "tell"}, {t: "me how he", p: "other", a: null}, {t: "wandered", p: "verb", a: "driven"}, {t: "and was lost", p: "verb", a: null}
            ]},
            { line: 3, words: [
                {t: "when", p: "conj", a: "after"}, {t: "he had wrecked", p: "verb", a: "sacked"}, {t: "the holy", p: "adj", a: "holy"}, {t: "town", p: "noun", a: "citadel"}, {t: "of Troy,", p: "name", a: "troy"}
            ]},
            { line: 4, words: [
                {t: "and where he went, and who he met,", p: "other", a: "cities"}, {t: "the pain", p: "noun", a: "pains"}
            ]},
            { line: 5, words: [
                {t: "he suffered", p: "verb", a: "suffered"}, {t: "on the", p: "other", a: "on"}, {t: "sea,", p: "noun", a: "sea"}, {t: "and how he worked", p: "verb", a: "struggling"}
            ]},
            { line: 6, words: [
                {t: "to save", p: "verb", a: "save"}, {t: "his", p: "pron", a: "his"}, {t: "life", p: "noun", a: "soul"}, {t: "and bring his men", p: "other", a: "companions"}, {t: "back home.", p: "noun", a: "homecoming"}
            ]},
            { line: 7, words: [
                {t: "He failed,", p: "verb", a: "not"}, {t: "and for their own", p: "pron", a: "own"}, {t: "mistakes,", p: "noun", a: "recklessness"}, {t: "they died.", p: "verb", a: "destroyed"}
            ]},
            { line: 8, words: [
                {t: "They are the", p: "other", a: "fools"}, {t: "Sun God's", p: "name", a: "helios"}, {t: "cattle,", p: "noun", a: "oxen"}, {t: "and the god", p: "name", a: null}
            ]},
            { line: 9, words: [
                {t: "kept them", p: "verb", a: "took"}, {t: "from home.", p: "noun", a: "homecoming"}, {t: "Now goddess, child of Zeus,", p: "other", a: null}
            ]},
            { line: 10, words: [
                {t: "tell the old story for our modern times.", p: "other", a: null}
            ]},
            { line: 11, words: [
                {t: "Find the beginning.", p: "other", a: null}
            ]}
        ];

        // Functions to Render Text

        function renderColumn(containerId, data) {
            const container = document.getElementById(containerId);
            container.innerHTML = ''; // Clear

            data.forEach(lineData => {
                const lineDiv = document.createElement('div');
                lineDiv.className = 'mb-2 flex items-baseline';
                
                // Line Number
                const lineNum = document.createElement('span');
                lineNum.className = 'text-xs text-slate-400 font-sans select-none w-6 inline-block flex-shrink-0';
                lineNum.innerText = lineData.line;
                lineDiv.appendChild(lineNum);

                // Words
                const textSpan = document.createElement('div');
                
                lineData.words.forEach(word => {
                    const span = document.createElement('span');
                    span.innerText = word.t + " ";
                    span.className = `word-span pos-${word.p}`;
                    if (word.a) {
                        span.dataset.align = word.a;
                        // Event Listeners
                        span.addEventListener('mouseenter', handleMouseEnter);
                        span.addEventListener('mouseleave', handleMouseLeave);
                    }
                    textSpan.appendChild(span);
                });

                lineDiv.appendChild(textSpan);
                container.appendChild(lineDiv);
            });
        }

        function handleMouseEnter(e) {
            const alignId = e.target.dataset.align;
            if(!alignId) return;

            // Find all elements with this align ID
            const targets = document.querySelectorAll(`[data-align="${alignId}"]`);
            targets.forEach(el => el.classList.add('active-alignment'));
        }

        function handleMouseLeave(e) {
            const alignId = e.target.dataset.align;
            if(!alignId) return;

            const targets = document.querySelectorAll(`[data-align="${alignId}"]`);
            targets.forEach(el => el.classList.remove('active-alignment'));
        }

        function toggleColors() {
            document.body.classList.toggle('no-colors');
            const btn = document.getElementById('toggleColors');
            if (document.body.classList.contains('no-colors')) {
                btn.classList.remove('bg-blue-100', 'text-blue-800');
                btn.classList.add('bg-slate-200', 'text-slate-600');
                btn.innerText = "Colors Off";
            } else {
                btn.classList.remove('bg-slate-200', 'text-slate-600');
                btn.classList.add('bg-blue-100', 'text-blue-800');
                btn.innerText = "Colors On";
            }
        }

        function resetView() {
            document.body.classList.remove('no-colors');
            const btn = document.getElementById('toggleColors');
            btn.classList.add('bg-blue-100', 'text-blue-800');
            btn.innerText = "Colors On";
            
            // Remove any stuck highlights
            document.querySelectorAll('.active-alignment').forEach(el => el.classList.remove('active-alignment'));
        }

        // Initialize
        renderColumn('greek-container', greekData);
        renderColumn('lattimore-container', lattimoreData);
        renderColumn('wilson-container', wilsonData);

    </script>
</body>
</html>